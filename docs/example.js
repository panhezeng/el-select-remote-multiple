!function(e){var t={};function n(l){if(t[l])return t[l].exports;var i=t[l]={i:l,l:!1,exports:{}};return e[l].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(l,i,function(t){return e[t]}.bind(null,i));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t){e.exports=Vue},function(e,t,n){var l,i;window,e.exports=(l=n(2),i=n(3),function(e){var t={};function n(l){if(t[l])return t[l].exports;var i=t[l]={i:l,l:!1,exports:{}};return e[l].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(l,i,function(t){return e[t]}.bind(null,i));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=l},function(e,t){e.exports=i},function(e,t,n){"use strict";n.r(t),n.d(t,"ElSelectRemoteMultiple",function(){return l});const l=n(3).default;let i;function o(e,t="undefined"!=typeof window&&window.ElSelectRemoteMultipleOptions){i?console.warn("[ElSelectRemoteMultiple] already installed. Vue.use(ElSelectRemoteMultiple) should be called only once."):(i=e,"[object Object]"===Object.prototype.toString.call(t)&&t.ajax instanceof Object&&t.ajax.hasOwnProperty("get")&&t.ajax.hasOwnProperty("post")&&Object.assign(l.props.ajax,{required:!1,default:()=>t.ajax}),i.component(l.name,l))}l.install=o,"undefined"!=typeof window&&window.Vue&&o(window.Vue)},function(e,t,n){"use strict";n.r(t);var l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-select",e._g(e._b({staticStyle:{width:"100%"},attrs:{placeholder:e.placeholder,disabled:e.disabled,multiple:"",filterable:"",remote:"","remote-method":e.getLabelsOptions,loading:e.labelsLoading},on:{change:e.updateSelected},scopedSlots:e._u([{key:"prefix",fn:function(){return[e._t("prefix")]},proxy:!0},{key:"empty",fn:function(){return[e._t("empty")]},proxy:!0}],null,!0),model:{value:e.labelsSelected,callback:function(t){e.labelsSelected=t},expression:"labelsSelected"}},"el-select",e.$attrs,!1),e.$listeners),[e._t("default"),e._v(" "),e._v(" "),e._v(" "),e._l(e.labelsOptions,function(t){return[t&&t[e.valueKey]?[n("el-option",{key:t[e.valueKey],attrs:{label:t[e.labelKey],value:t[e.valueKey]}})]:e._e()]})],2),e._v(" "),e._t("default")],2)};l._withStripped=!0;var i=n(0),o=n(1),r=n.n(o),a=function(e,t,n,l,i,o,r,a){var s,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=[],c._compiled=!0),s)if(c.functional){c._injectStyles=s;var p=c.render;c.render=function(e,t){return s.call(t),p(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,s):[s]}return{exports:e,options:c}}({name:"ElSelectRemoteMultiple",components:{"el-select":i.Select,"el-option":i.Option},inheritAttrs:!1,props:{selectedObj:{type:Array,required:!0,default:()=>[]},selected:{type:Array,default:()=>[]},labelKey:{type:String,default:"name"},valueKey:{type:String,default:"id"},ajax:{validator:e=>e instanceof Object&&e.hasOwnProperty("get")&&e.hasOwnProperty("post"),required:!0},apiOptionsUrl:{type:String,required:!0},apiOptionsParamKeys:{type:Object,default:()=>({limit:"limit",offset:"offset",search:"search"})},apiOptionsLimit:{type:Number,default:10},apiOptionsResPath:{type:String,default:"data"},apiOptionsCallback:{type:Function,default:void 0},apiCreateUrl:{type:String,default:""},apiCreateResPath:{type:String,default:"data"},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""}},data:()=>({labelsSelected:[],labelsOptions:[],labelsLoading:!1,needInitData:!0}),watch:{selectedObj:{immediate:!0,handler(e,t){this.initData(),this.needInitData=!0}}},methods:{initData(){this.needInitData&&(this.labelsOptions=this.selectedObj,this.labelsSelected=this.selectedObj.reduce((e,t)=>("[object Object]"===Object.prototype.toString.call(t)&&t[this.valueKey]&&e.push(t[this.valueKey]),e),[]),this.$emit("update:selected",this.labelsSelected.slice()),this.$nextTick(function(){this.labelsOptions=[]}))},async updateSelected(){const e=this.labelsOptions=this.selectedObj.concat(this.labelsOptions),t=[];for(let n=this.labelsSelected.length;n--;){const l=this.labelsSelected[n],i=e.find(e=>String(e[this.valueKey])===String(l));if("[object Object]"===Object.prototype.toString.call(i))if("ElSelectRemoteMultipleCreateTempPlaceholderValue"===String(l))try{const l=await this.ajax.post(this.apiCreateUrl,{[this.labelKey]:i[this.labelKey]}),o=r()(l,this.apiCreateResPath);t.push(o),this.labelsOptions.push(o),this.labelsSelected[n]=o[this.valueKey]}catch(e){this.labelsSelected.splice(n,1)}else t.push(i);else this.labelsSelected.splice(n,1)}this.needInitData=!1,this.$emit("update:selectedObj",t),this.$emit("update:selected",this.labelsSelected.slice()),this.$nextTick(function(){this.labelsOptions=[]})},async getLabelsOptions(e=""){let t=[];if(this.labelsLoading=!0,e=String(e).trim())try{const n=await this.ajax.get(this.apiOptionsUrl,{params:{[this.apiOptionsParamKeys.limit]:this.apiOptionsLimit,[this.apiOptionsParamKeys.offset]:0,[this.apiOptionsParamKeys.search]:e}});if(t=r()(n,this.apiOptionsResPath),"[object Array]"===Object.prototype.toString.call(t)){const n=t.findIndex(t=>String(t[this.labelKey])===e);if(-1===n){const n=this.selectedObj.find(t=>String(t[this.labelKey])===String(e));"[object Object]"===Object.prototype.toString.call(n)?t.unshift(n):this.apiCreateUrl&&t.unshift({[this.labelKey]:e,[this.valueKey]:"ElSelectRemoteMultipleCreateTempPlaceholderValue"})}else if(n>0){const e=t[0];t[0]=t[n],t[n]=e}}else t=[]}catch(e){}/^\[object [^F]*Function\]$/.test(Object.prototype.toString.call(this.apiOptionsCallback))&&this.apiOptionsCallback(t),this.labelsOptions=t,this.labelsLoading=!1}}},l);a.options.__file="src/ElSelectRemoteMultiple.vue",t.default=a.exports}]).ElSelectRemoteMultiple)},function(e,t){e.exports=ELEMENT},function(e,t,n){window,e.exports=function(e){var t={};function n(l){if(t[l])return t[l].exports;var i=t[l]={i:l,l:!1,exports:{}};return e[l].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(l,i,function(t){return e[t]}.bind(null,i));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}({4:function(e,t){e.exports=function(e,t,n){if("[object Object]"===Object.prototype.toString.call(e)&&"[object String]"===Object.prototype.toString.call(t)){const l=t.split(".");let i=0,o=l.length;for(;"[object Object]"===Object.prototype.toString.call(e)&&i<o;)e=e[l[i++]];return i&&i==o?e:n}return n}}})},function(e,t,n){"use strict";n.r(t);var l=n(0),i=n.n(l),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("h1",[e._v("\n    因为apiary的mock比较弱，如想获得预期效果，纯搜索只支持输入 Option name 1\n    ，创建功能只支持输入 Option name 2\n  ")]),e._v(" "),n("el-select-remote-multiple",{attrs:{"api-options-url":e.apiOptionsUrl,"api-create-url":e.apiCreateUrl,"api-options-res-path":"data.data","api-options-callback":e.apiOptionsCallback,"selected-obj":e.selectedObj,selected:e.selected,placeholder:"输入关键字，从搜索结果中选择"},on:{"update:selectedObj":function(t){e.selectedObj=t},"update:selected-obj":function(t){e.selectedObj=t},"update:selected":function(t){e.selected=t}},scopedSlots:e._u([{key:"prefix",fn:function(){return[n("span",[e._v("test")])]},proxy:!0}])}),e._v(" "),n("el-select-remote-multiple",{attrs:{"api-options-url":e.apiOptionsUrl,"api-create-url":e.apiCreateUrl,"api-options-res-path":"data.data","selected-obj":e.selectedObj,selected:e.selected,placeholder:"输入关键字，从搜索结果中选择"},on:{"update:selectedObj":function(t){e.selectedObj=t},"update:selected-obj":function(t){e.selectedObj=t},"update:selected":function(t){e.selected=t}}})],1)};o._withStripped=!0,window.ElSelectRemoteMultipleOptions={ajax:i.a.http},n(1);var r=function(e,t,n,l,i,o,r,a){var s,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),l&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),r?(s=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=s):i&&(s=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),s)if(c.functional){c._injectStyles=s;var p=c.render;c.render=function(e,t){return s.call(t),p(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,s):[s]}return{exports:e,options:c}}({name:"App",data:()=>({apiOptionsUrl:"https://private-87040-publicexample.apiary-mock.com/el-select-remote-multiple/options",apiCreateUrl:"https://private-87040-publicexample.apiary-mock.com/el-select-remote-multiple/option",selected:[],selectedObj:[]}),methods:{apiOptionsCallback(e){e.forEach(e=>{this.$set(e,"name","id:"+e.id+" name:"+e.name)})}}},o,[],!1,null,null,null);r.options.__file="example/components/App.vue";var a=r.exports;new i.a({el:"#app",render:e=>e(a)})}]);